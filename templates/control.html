{% extends "base.html" %}

<!-- 页面标题 -->
{% block PageTitle %} 控制界面 {% endblock %}
{% block AdditionScript %}
     <script src="/statics/js/topInfo.js"></script>

     <link href="/statics/css/font-awesome.min.css" rel="stylesheet">
     <link rel="stylesheet" type="text/css" href="/statics/css/jsdaima.css">
{% endblock %}

{% block titleURL%} /index/ {% endblock %}
{% block title %}
    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
    ONTRC
{% endblock %}


{% block MainContents %}
    <h3>Control Page</h3>
    <hr>

    <div class="row">
        <div class="col-md-12">
            <div class="tab" role="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#Section1"
                      aria-controls="lightpath" role="tab" data-toggle="tab" aria-expanded="true">
                        <span>Lightpath Model</span></a></li>
                    <li role="presentation" class=""><a href="#Section2"
                        aria-controls="wss" role="tab" data-toggle="tab" aria-expanded="false">
                        <span>WSS调试模式</span></a></li>
                    <li role="presentation" class=""><a href="#Section3"
                        aria-controls="oeo" role="tab" data-toggle="tab" aria-expanded="false">
                        <span>OEO调试模式</span></a></li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content tabs">
                    <!--  第1个面板  -->
                    <div role="tabpanel" class="tab-pane fade active in" id="Section1">

                        <div class="panel panel-warning">
                            <div class="panel-heading">Lightpath Model（TEST）</div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-2"><strong>Name：</strong></div>
                                    <div class="col-md-2"><strong>S-Switch:</strong></div>
                                    <div class="col-md-2"><strong>S-Switch Port:</strong></div>
                                    <div class="col-md-2"><strong>S-OEO：</strong></div>
                                    <div class="col-md-2"><strong>S-OEO Slot：</strong></div>
                                    <div class="col-md-2"><strong>AWG in Port：</strong></div>
                                </div>

                                <div class="row">
                                    <div class="col-md-2">
                                        <input type="text" class="form-control"
                                               placeholder="Text input" value="***" id="light-path-name">
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="startswitchid">
                                            <option value="1">SWITCH#1</option>
                                            <option value="2">SWITCH#2</option>
                                            <option value="3">SWITCH#3</option>
                                            <option value="4">SWITCH#4</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="startswitchport">
                                            <option value="1">PORT@1</option>
                                            <option value="2">PORT@2</option>
                                            <option value="3">PORT@3</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="startoeodevice">
                                            <option value="1">OEO#1</option>
                                            <option value="2">OEO#2</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="startoeoslot">
                                            <option value="2">Card#2</option>
                                            <option value="4">Card#4</option>
                                            <option value="6">Card#6</option>
                                            <option value="8">Card#8</option>
                                            <option value="10">Card#10</option>
                                            <option value="12">Card#12</option>
                                            <option value="14">Card#14</option>
                                            <option value="16">Card#16</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="light-path-awgin">
                                            <option value="1">AWG@1</option>
                                            <option value="2">AWG@2</option>
                                            <option value="3">AWG@3</option>
                                            <option value="4">AWG@4</option>
                                        </select>
                                    </div>

                                </div>

                                <div class="row" style="margin-top: 20px">
                                    <div class="col-md-2"><strong>Multiplexer:</strong></div>
                                    <div class="col-md-2"><strong>WSS:</strong></div>
                                    <div class="col-md-2"><strong>WSS Port:</strong></div>
                                    <div class="col-md-2"><strong>ATT:</strong></div>
                                    <div class="col-md-2"><strong>Chanel：</strong></div>
                                </div>

                                <div class="row">
                                    <div class="col-md-2">
                                        <select class="form-control" id="light-path-H">
                                            <option value="1">H#1</option>
                                            <option value="2">H#2</option>
                                            <option value="3">H#3</option>
                                            <option value="4">H#4</option>
                                        </select>
                                    </div>


                                    <div class="col-md-2">
                                        <select class="form-control" id="light-path-wssdevice">
                                            <option value="1">WSS#1</option>
                                            <option value="2">WSS#2</option>
                                            <option value="3">WSS#3</option>
                                            <option value="4">WSS#4</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="light-path-wssport">
                                            <option value="1">PORT@1</option>
                                            <option value="2">PORT@2</option>
                                            <option value="3">PORT@3</option>
                                            <option value="4">PORT@4</option>
                                            <option value="5">PORT@5</option>
                                            <option value="6">PORT@6</option>
                                            <option value="7">PORT@7</option>
                                            <option value="8">PORT@8</option>
                                            <option value="9">PORT@9</option>
                                        </select>

                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="light-path-att">
                                            <option value="0">0db</option>
                                            <option value="255">25db</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-warning"
                                                data-toggle="modal" data-target="#collapseChanelSelect"
                                                id="SetLightPath">
                                          默认C1
                                        </button>
                                    </div>

                                </div>

                                <div class="row" style="margin-top: 20px">
                                    <div class="col-md-2"><strong>E-OEO:</strong></div>
                                    <div class="col-md-2"><strong>E-OEO Slot:</strong></div>
                                    <div class="col-md-2"><strong>E-Switch:</strong></div>
                                    <div class="col-md-2"><strong>E-Switch Port:</strong></div>
                                </div>

                                <div class="row">
                                    <div class="col-md-2">
                                        <select class="form-control" id="endoeodevice">
                                            <option value="1">OEO#1</option>
                                            <option value="2">OEO#2</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="endoeoslot">
                                            <option value="2">Card#2</option>
                                            <option value="4">Card#4</option>
                                            <option value="6">Card#6</option>
                                            <option value="8">Card#8</option>
                                            <option value="10">Card#10</option>
                                            <option value="12">Card#12</option>
                                            <option value="14">Card#14</option>
                                            <option value="16">Card#16</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="endswitchid">
                                            <option value="1">SWITCH#1</option>
                                            <option value="2">SWITCH#2</option>
                                            <option value="3">SWITCH#3</option>
                                            <option value="4">SWITCH#4</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="endswitchport">
                                            <option value="1">PORT@1</option>
                                            <option value="2">PORT@2</option>
                                            <option value="3">PORT@3</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-danger"
                                                id="light-path-add">Confirm</button>
                                    </div>

                                </div>

                                <hr>
                                <div class="row">
                                    <div class="col-md-3"><strong>Select the lightpath：</strong></div>
                                    <div class="col-md-2">
                                        <select class="form-control" id="lightpathmodify">
                                            <option value="0">Select...</option>

                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-danger"
                                                id="light-path-delet">Delet</button>
                                    </div>
                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-warning"
                                                id="light-path-change">Change</button>
                                    </div>
                                </div>
                                <hr>

                                <div class="row">
                                    <div class="col-md-12">
                                        <h4 style="color: #ff6129">    <strong>Lightpath Info</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                            <th>Name</th> <th>S-Switch</th> <th>S-OEO</th> <th>AWG-in</th>
                                            <th>WSS</th> <th>E-OEO</th> <th>E-Switch</th> <th>Chanel</th> <th>State</th>
                                        </tr> </thead>

                                        <tbody id="tableLightPath"></tbody>
                                        </table>

                                    </div>
                                </div>


                            </div> <!-- panel-body-->
                        </div> <!-- end panel logging-->

                    </div><!--  第1个面板结束  -->

                    <!--  第2个面板  -->
                    <div role="tabpanel" class="tab-pane fade" id="Section2">

                        <div class="panel panel-success">
                            <div class="panel-heading">调试模式WSS（测试版）</div>
                            <div class="panel-body">

                                <div class="row">
                                    <div class="col-md-2"><strong>WSS:</strong></div>
                                    <div class="col-md-2"><strong>波长(点击选择)：</strong></div>
                                    <div class="col-md-2"><strong>Port:</strong></div>
                                    <div class="col-md-2"><strong>衰减</strong></div>
                                </div>

                                <div class="row">

                                    <div class="col-md-2">
                                        <select class="form-control" id="DebugWSSdevice">
                                            <option value="1">WSS#1</option>
                                            <option value="2">WSS#2</option>
                                            <option value="3">WSS#3</option>
                                            <option value="4">WSS#4</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-primary"
                                                data-toggle="modal" data-target="#collapseChanelSelect"
                                                id="DebugSetWssChanel">
                                          默认C1
                                        </button>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="DebugWSSport">
                                            <option value="1">Port@1</option>
                                            <option value="2">Port@2</option>
                                            <option value="3">Port@3</option>
                                            <option value="4">Port@4</option>
                                            <option value="5">Port@5</option>
                                            <option value="6">Port@6</option>
                                            <option value="7">Port@7</option>
                                            <option value="8">Port@8</option>
                                            <option value="9">Port@9</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="DebugWSSatt">
                                            <option value="0">0db</option>
                                            <option value="255">25db</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-danger" id="DebugSetWSS">
                                            确认设置</button>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-success" id="DebugUpdataWSS">
                                            同步更新</button>
                                    </div>

                                </div>
                                <hr>


                                <!--  以下显示WSS卡信息  -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>WSS-CoAdna#1</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>通道</th> <th>端口</th> <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableWSS1"></tbody>
                                        </table>

                                    </div>

                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>WSS-CoAdna#2</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>通道</th> <th>端口</th> <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableWSS2"></tbody>
                                        </table>

                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>WSS-Finisa#3</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>通道</th> <th>端口</th> <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableWSS3"></tbody>
                                        </table>

                                    </div>

                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>WSS-Finisa#4</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>通道</th> <th>端口</th> <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableWSS4"></tbody>
                                        </table>

                                    </div>

                                </div>

                            </div> <!-- panel-body-->
                        </div> <!-- end panel logging-->

                    </div><!--  第2个面板结束  -->

                    <!--  第三个面板  -->
                    <div role="tabpanel" class="tab-pane fade" id="Section3">

                        <!-- OEO调试模式 -->
                        <div class="panel panel-info">
                            <div class="panel-heading">调试模式OEO（测试版）</div>
                            <div class="panel-body">

                                <div class="row">
                                    <div class="col-md-2"><strong>OEO:</strong></div>
                                    <div class="col-md-2"><strong>卡槽:</strong></div>
                                    <div class="col-md-2"><strong>波长(点击选择)：</strong></div>
                                </div>

                                <div class="row">

                                    <div class="col-md-2">
                                        <select class="form-control" id="DebugOEOdevice">
                                            <option value="1">OEO#1</option>
                                            <option value="2">OEO#2</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <select class="form-control" id="DebugOEOslot">
                                            <option value="2">Card#2</option>
                                            <option value="4">Card#4</option>
                                            <option value="6">Card#6</option>
                                            <option value="8">Card#8</option>
                                            <option value="10">Card#10</option>
                                            <option value="12">Card#12</option>
                                            <option value="14">Card#14</option>
                                            <option value="16">Card#16</option>
                                        </select>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-primary"
                                                data-toggle="modal" data-target="#collapseChanelSelect"
                                                id="DebugSetOeoChanel">
                                          默认C1
                                        </button>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-danger" id="DebugSetOEO">
                                            确认设置</button>
                                    </div>

                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-success" id="DebugUpdataOEO">
                                            同步更新</button>
                                    </div>

                                </div>
                                <hr>

                                <!--  以下显示OEO卡信息  -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>OEO#1</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>卡槽</th> <th>波长通道</th> <th>波长</th> <th>局端</th>
                                        <th>远端</th>  <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableOEO1"></tbody>
                                        </table>

                                    </div>

                                    <div class="col-md-6">
                                        <h4 style="color: #ff6129">    <strong>OEO#2</strong></h4>
                                        <table class="table table-striped table-hover">
                                        <thead> <tr>
                                        <th>卡槽</th> <th>波长通道</th> <th>波长</th> <th>局端</th>
                                        <th>远端</th>  <th>注册光路</th>
                                        </tr> </thead>

                                        <tbody id="tableOEO2"></tbody>
                                        </table>

                                    </div>

                                </div>

                            </div> <!-- panel-body-->
                        </div> <!-- end panel logging-->

                    </div> <!--  第三个面板结束  -->

                </div> <!--  面板部分结束  -->
            </div>
        </div> <!--  框架部分结束  -->
    </div> <!--  容器部分  -->



    <!-- 隐藏部分 -->
    <div class="modal fade" id="collapseChanelSelect" tabindex="-1"
         role="dialog" aria-labelledby="ChanelSelect">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title text-center" id="ChanelSelect" style="color: red">
                        <strong>波长通道选择界面</strong></h4>
                </div>

                <div class="modal-body">

                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C1" value="1">C01</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C2" value="2">C02</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C3" value="3">C03</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C4" value="4">C04</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C5" value="5">C05</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C6" value="6">C06</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C7" value="7">C07</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C8" value="8">C08</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C9" value="9">C09</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C10" value="10">C10</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C11" value="11">C11</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C12" value="12">C12</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C13" value="13">C13</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C14" value="14">C14</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C15" value="15">C15</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C16" value="16">C16</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C17" value="17">C17</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C18" value="18">C18</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C19" value="19">C19</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C20" value="20">C20</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C21" value="21">C21</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C22" value="22">C22</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C23" value="23">C23</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C24" value="24">C24</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C25" value="25">C25</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C26" value="26">C26</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C27" value="27">C27</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C28" value="28">C28</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C29" value="29">C29</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C30" value="30">C30</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C31" value="31">C31</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C32" value="32">C32</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C33" value="33">C33</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C34" value="34">C34</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C35" value="35">C35</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C36" value="36">C36</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C37" value="37">C37</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C38" value="38">C38</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C39" value="39">C39</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C40" value="40">C40</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C41" value="41">C41</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C42" value="42">C42</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C43" value="43">C43</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C44" value="44">C44</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C45" value="45">C45</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C46" value="46">C46</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C47" value="47">C47</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C48" value="48">C48</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C49" value="49">C49</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C50" value="50">C50</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C51" value="51">C51</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C52" value="52">C52</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C53" value="53">C53</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C54" value="54">C54</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C55" value="55">C55</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C56" value="56">C56</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C57" value="57">C57</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C58" value="58">C58</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C59" value="59">C59</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C60" value="60">C60</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C61" value="61">C61</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C62" value="62">C62</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C63" value="63">C63</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C64" value="64">C64</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C65" value="65">C65</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C66" value="66">C66</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C67" value="67">C67</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C68" value="68">C68</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C69" value="69">C69</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C70" value="70">C70</button></div>
                    </div>

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-1"></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C71" value="71">C71</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C72" value="72">C72</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C73" value="73">C73</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C74" value="74">C74</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C75" value="75">C75</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C76" value="76">C76</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C77" value="77">C77</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C78" value="78">C78</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C79" value="79">C79</button></div>
                        <div class="col-md-1"><button type="button" class="btn btn-warning chanelbutton" id="C80" value="80">C80</button></div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-block btn-primary"
                            style="width: 50%;margin-left: 25%" data-dismiss="modal">确定</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}



{% block script %}
    <script>
        var chanel = 1;  //记录全局chanel
        $("#DHTcontrol").addClass("active");

        // 当页面载入之后，读取数据库信息
        $(document).ready(function () {
            // 初始化通道选择按钮
            $("#C"+chanel).removeClass("btn-warning");
            $("#C"+chanel).addClass("btn-success");

            //读取光路table
            LoadLighPathTable();
            //读取WSS设备信息
            LoadWSSInfo("1");
            LoadWSSInfo("2");
            LoadWSSInfo("3");
            LoadWSSInfo("4");
            //读取OEO设备信息
            LoadOeoCardInfo("1");
            LoadOeoCardInfo("2");
            }
        );

        // 当通道按钮被按下之后
        $(".chanelbutton").click(function () {
                var newchanel = $(this).val();
                change_chanel(newchanel);
            });


        function change_chanel(newchanel) {
            $("#C"+chanel).removeClass("btn-success");
            $("#C"+chanel).addClass("btn-warning");

            chanel = newchanel;
            $("#C"+chanel).removeClass("btn-warning");
            $("#C"+chanel).addClass("btn-success");
            $("#DebugSetOeoChanel,#DebugSetWssChanel,#SetLightPath").html("C"+chanel);
        }


        //-----------------------光路模式部分-------------------------

        // 增加光路操作
        $("#light-path-add").click(function () {
            addlightpath();
        });

        function addlightpath() {
            $("#light-path-add").attr("disabled","disabled");
            $("#light-path-add").text("Runing...");
            $("#Topinfo2").removeClass("hide");

            var lightname = $("#light-path-name").val();

            var lightstartswitchid = $("#startswitchid").select().val();
            var lightstartswitchport = $("#startswitchport").select().val();
            var lightstartoeoid = $("#startoeodevice").select().val();
            var lightstartoeoslot = $("#startoeoslot").select().val();

            var lightawg = $("#light-path-awgin").select().val();
            var lightpathH = $("#light-path-H").select().val();
            var lightwssid = $("#light-path-wssdevice").select().val();
            var lightwssport = $("#light-path-wssport").select().val();
            var lightatt = $("#light-path-att").select().val();

            var lightendswitchid = $("#endswitchid").select().val();
            var lightendswitchport = $("#endswitchport").select().val();
            var lightendoeoid = $("#endoeodevice").select().val();
            var lightendoeoslot = $("#endoeoslot").select().val();


            $.ajax({
                url: "/ajax_control_addlightpath/",
                type: "POST",
                data: {"name":lightname,"startswitchid":lightstartswitchid,"startswitchport":lightstartswitchport,
                       "startoeoid":lightstartoeoid,"startoeoslot":lightstartoeoslot,
                       "awgin":lightawg,"he":lightpathH,"wssid":lightwssid,"wssport":lightwssport,
                       "att":lightatt,"endoeoid":lightendoeoid,"endoeoslot":lightendoeoslot,
                       "endswitchid":lightendswitchid,"endswitchport":lightendswitchport,
                        "chanel":chanel},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    if(data.data=="SUCCESS")
                        ShowTopInfo1("alert-success","设置成功！");
                    else
                        ShowTopInfo1("alert-danger","设置失败！")

                    $("#light-path-add").removeAttr("disabled");
                    $("#light-path-add").text("注册光路");
                    $("#Topinfo2").addClass("hide");

                    // 刷新页面
                    LoadLighPathTable();
                }
            }); // end ajax
        }


        // 删除光路操作
        $("#light-path-delet").click(function () {
            deletlightpath("YES");
        });

        function deletlightpath(resetflag) {
            $("#light-path-delet").attr("disabled","disabled");
            $("#light-path-delet").text("Runing...");
            $("#Topinfo2").removeClass("hide");

            var name = $("#lightpathmodify").select().val();

            $.ajax({
                url: "/ajax_control_deletlightpath/",
                type: "POST",
                data: {"LightPath":name,"Reset":resetflag},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    console.log(data);
                    // 显示通知
                    ShowTopInfo1("alert-success",data.data);

                    $("#light-path-delet").removeAttr("disabled");
                    $("#light-path-delet").text("确认删除");
                    $("#Topinfo2").addClass("hide");
                    // 刷新页面
                    LoadLighPathTable();
                }
            }); // end ajax
        }


        //当检测到选择框发生变化,快速载入信息
        $("#lightpathmodify").change(function () {
            var name = $("#lightpathmodify").select().val();

            $.ajax({
                url: "/ajax_control_loadlightpathtable/",
                type: "POST",
                data: {"Device":"NULL"},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    var count=0;
                    for(;count<data.data.length;count+=9){
                        if(data.data[count]==name){
                            $("#light-path-name").val(name);
                            change_chanel(data.data[count+7]);

                            var startswitchid = data.data[count+1].split("@")[0];
                            $("#startswitchid").find("option[value='"+startswitchid+"']").attr("selected",true);
                            var startswitchport = data.data[count+1].split("@")[1];
                            $("#startswitchport").find("option[value='"+startswitchport+"']").attr("selected",true);

                            var startoeoid = data.data[count+2].split("#")[0];
                            $("#startoeodevice").find("option[value='"+startoeoid+"']").attr("selected",true);
                            var startoeoslot = data.data[count+2].split("#")[1];
                            $("#startoeoslot").find("option[value='"+startoeoslot+"']").attr("selected",true);

                            var awgin = data.data[count+3].split("#")[0];
                            $("#light-path-awgin").find("option[value='"+awgin+"']").attr("selected",true);
                            var hein = data.data[count+3].split("#")[1];
                            $("#light-path-H").find("option[value='"+hein+"']").attr("selected",true);
                            var wssid = data.data[count+4].split("@")[0];
                            $("#light-path-wssdevice").find("option[value='"+wssid+"']").attr("selected",true);
                            var wssport = data.data[count+4].split("@")[1];
                            $("#light-path-wssport").find("option[value='"+wssport+"']").attr("selected",true);

                            var endoeoid = data.data[count+5].split("#")[0];
                            $("#endoeodevice").find("option[value='"+endoeoid+"']").attr("selected",true);
                            var endoeoslot = data.data[count+5].split("#")[1];
                            $("#endoeoslot").find("option[value='"+endoeoslot+"']").attr("selected",true);

                            var endswitchid = data.data[count+6].split("@")[0];
                            $("#endswitchid").find("option[value='"+endswitchid+"']").attr("selected",true);
                            var endswitchport = data.data[count+6].split("@")[1];
                            $("#endswitchport").find("option[value='"+endswitchport+"']").attr("selected",true);
                        }
                    }

                }
            }); // end ajax
        });


        //当按下修改光路按钮的时候，实际上时删除之前信息，再增加新的信息
        $("#light-path-change").click(function () {
            deletlightpath("YES");
            //这里的时间需要斟酌
            setTimeout("addlightpath()",12000);
        });


        //-----------------------WSS调试部分-------------------------
        $("#DebugSetWSS").click(function () {
            var wss = $("#DebugWSSdevice").select().val();
            var port = $("#DebugWSSport").select().val();
            var att = $("#DebugWSSatt").select().val();

            $.ajax({
                url: "/ajax_control_setwss/",
                type: "POST",
                data: {"Device":wss,"Port":port,"Chanel":chanel,"Att":att},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    if(data.data=="SUCCESS")
                        ShowTopInfo1("alert-success","设置成功！");
                    else
                        ShowTopInfo1("alert-danger","设置失败！");

                    // 刷新页面
                    LoadWSSInfo("1");
                    LoadWSSInfo("2");
                    LoadWSSInfo("3");
                    LoadWSSInfo("4");
                }
            }); // end ajax

        });



        // 当请求更新WSS卡状态数据的时候
        $("#DebugUpdataWSS").click(function () {
            //$("#tableOEO1,#tableOEO2").empty();

            ShowTopInfo1("alert-warning","该操作将持续2-8分钟，10分钟内请勿持续点击");
            $.ajax({
                url: "/ajax_control_updatawssinfo/",
                type: "POST",
                data: {"Device":"1"},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    console.log(data);
                    // 显示通知
                    ShowTopInfo1("alert-success",data.data);

                    // 刷新页面
                    LoadWSSInfo("1");
                    LoadWSSInfo("2");
                }
            }); // end ajax

        });


        //-----------------------OEO调试部分-------------------------

        // 当OEO 调试部分的按钮被按下之后
        $("#DebugSetOEO").click(function () {
            var oeo = $("#DebugOEOdevice").select().val();
            var slot = $("#DebugOEOslot").select().val();

            $("#DebugSetOEO").attr("disabled","disabled");
            $("#DebugSetOEO").text("Runing...");
            $("#Topinfo2").removeClass("hide");

            $.ajax({
                url: "/ajax_control_setoeo/",
                type: "POST",
                data: {"Device":oeo,"Slot":slot,"Chanel":chanel},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    if(data.data=="SUCCESS")
                        ShowTopInfo1("alert-success","设置成功！");
                    else
                        ShowTopInfo1("alert-danger","设置失败！");


                    $("#DebugSetOEO").removeAttr("disabled");
                    $("#DebugSetOEO").text("确认设置");
                    $("#Topinfo2").addClass("hide");

                    // 刷新页面
                    LoadOeoCardInfo("1");
                    LoadOeoCardInfo("2");
                }
            }); // end ajax

        });


        // 当请求更新OEO卡状态数据的时候
        $("#DebugUpdataOEO").click(function () {
            $("#tableOEO1,#tableOEO2").empty();

            $.ajax({
                url: "/ajax_control_updataoeoinfo/",
                type: "POST",
                data: {"Device":"1"},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    console.log(data);
                    // 显示通知
                    ShowTopInfo1("alert-success",data.data);

                    // 刷新页面
                    LoadOeoCardInfo("1");
                    LoadOeoCardInfo("2");
                }
            }); // end ajax

        });


        // 从数据库载入OEO卡信息
        function LoadOeoCardInfo(device) {
            $.ajax({
                url: "/ajax_control_loadoeoinfo/",
                type: "POST",
                data: {"Device":device},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    $("#tableOEO"+device).empty();
                    var count=0;
                    for(;count<data.data.length;count+=6){
                        var addin = '<tr> <th scope="row">'+data.data[count]+
                            '</th> <td>'+data.data[count+1]+
                            '</td> <td>'+data.data[count+2]+
                            '</td> <td>'+data.data[count+3]+
                            '</td> <td>'+data.data[count+4]+
                            '</td> <td>'+data.data[count+5]+
                            '</td> </tr>';
                        $("#tableOEO"+device).append(addin);
                    }
                }
            }); // end ajax
        }

        //从数据库载入WSS信息，由于数据量的问题，目前只载入被启用的wss信息
        function LoadWSSInfo(device) {
            $.ajax({
                url: "/ajax_control_loadwssinfo/",
                type: "POST",
                data: {"Device":device},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    $("#tableWSS"+device).empty();
                    var count=0;
                    for(;count<data.data.length;count+=3){
                        var addin = '<tr> <th scope="row">'+data.data[count]+
                            '</th> <td>'+data.data[count+1]+
                            '</td> <td>'+data.data[count+2]+
                            '</td> </tr>';
                        $("#tableWSS"+device).append(addin);
                    }
                }
            }); // end ajax
        }

        //从数据库载入光路Table信息
        function LoadLighPathTable() {
            $.ajax({
                url: "/ajax_control_loadlightpathtable/",
                type: "POST",
                data: {"Device":"NULL"},
                dataType: "json",
                traditional:true,
                success:function (data) {
                    $("#tableLightPath").empty();
                    $("#lightpathmodify").empty();
                    $("#lightpathmodify").append('<option value="0">请选择</option>');

                    var count=0;
                    for(;count<data.data.length;count+=9){
                        var addin = '<tr> <th scope="row">'+data.data[count]+
                            '</th> <td>'+data.data[count+1]+
                            '</td> <td>'+data.data[count+2]+
                            '</td> <td>'+data.data[count+3]+
                            '</td> <td>'+data.data[count+4]+
                            '</td> <td>'+data.data[count+5]+
                            '</td> <td>'+data.data[count+6]+
                            '</td> <td>'+data.data[count+7]+
                            '</td> <td>'+data.data[count+8]+
                            '</td> </tr>';
                        $("#tableLightPath").append(addin);

                        var addin2 = '<option value="'+data.data[count]+'">'+data.data[count]+'</option>';
                        $("#lightpathmodify").append(addin2);
                    }

                }
            }); // end ajax
        }
    </script>
{% endblock %}